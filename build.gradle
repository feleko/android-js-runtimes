// Simplified group for JitPack (com.github.<user>) so artifacts become com.github.feleko:<module>:1.0.1
group 'com.github.feleko'
version '1.0.2'

buildscript {
    repositories {
        mavenCentral()
        google()
        maven { url "https://plugins.gradle.org/m2/" }
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:7.1.3'
    }
}

rootProject.allprojects {
    repositories {
        google()
        mavenCentral()
    }
}



subprojects {
    tasks.withType(Test){
        enabled = false
    }

    apply plugin: 'com.android.library'

    apply plugin: 'maven-publish'

    android {
        compileOptions {
            sourceCompatibility JavaVersion.VERSION_11
            targetCompatibility JavaVersion.VERSION_11
        }
        if (this.hasProperty('kotlin')) {
            kotlin { jvmToolchain(11) }
        }


    compileSdkVersion 30
        defaultConfig {
            minSdkVersion 21
        }
        lintOptions {
            disable 'InvalidPackage'
        }

        testOptions {
            unitTests.all { enabled false }
        }

        // Minimal publication (release only) so JitPack can pick artifacts
        afterEvaluate { prj ->
            if (plugins.hasPlugin('com.android.library') && prj.components.findByName('release')) {
                prj.publishing {
                    publications { release(MavenPublication) { from prj.components.release } }
                    repositories { mavenLocal() }
                }
            }
        }
    }


}
